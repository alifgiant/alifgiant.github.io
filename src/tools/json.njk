---
layout: layouts/base.njk
title: JSON Formatter
description: Beautify, minify, and validate JSON data instantly.
permalink: /tools/json/
---

<div class="w-full max-w-6xl flex flex-col gap-12" x-data="jsonTool()">
    {# Header #}
    {% set tool = {} %}
    {% for item in site.pages.tools.list %}
        {% if item.url == "/tools/json/" %}
            {% set tool = item %}
        {% endif %}
    {% endfor %}
    {% set cat = site.pages.tools.categories[tool.tag] %}
    
    <div class="flex flex-col gap-4 text-center items-center">
        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider border {{ cat.color }}">
            <span class="material-symbols-outlined text-sm">{{ cat.icon }}</span>
            {{ tool.tag }}
        </div>
        <div class="w-16 h-16 rounded-2xl {{ cat.lightColor }} flex items-center justify-center mb-2">
            <span class="material-symbols-outlined text-4xl">{{ tool.icon }}</span>
        </div>
        <h1 class="text-4xl md:text-6xl font-bold text-text-main font-display">
            {{ tool.title }}
        </h1>
        <p class="text-lg text-text-muted max-w-xl leading-relaxed">
            {{ tool.description }}
        </p>
    </div>

    {# Tool Controls #}
    <div class="flex flex-wrap justify-center gap-4">
        <div class="flex p-1 bg-stone-100/80 backdrop-blur rounded-2xl border border-stone-200">
            <button @click="indent = 2; process()" :class="indent === 2 ? 'bg-white shadow-sm text-primary font-bold' : 'text-text-muted hover:text-text-main'" class="px-6 py-2 rounded-xl transition-all duration-300 text-sm">2 Spaces</button>
            <button @click="indent = 4; process()" :class="indent === 4 ? 'bg-white shadow-sm text-primary font-bold' : 'text-text-muted hover:text-text-main'" class="px-6 py-2 rounded-xl transition-all duration-300 text-sm">4 Spaces</button>
            <button @click="indent = 0; process()" :class="indent === 0 ? 'bg-white shadow-sm text-primary font-bold' : 'text-text-muted hover:text-text-main'" class="px-6 py-2 rounded-xl transition-all duration-300 text-sm">Minify</button>
        </div>
        
        <button @click="clear()" class="px-6 py-3 rounded-2xl bg-white border border-stone-200 text-text-muted font-bold text-sm hover:bg-stone-50 transition-all flex items-center gap-2">
            <span class="material-symbols-outlined text-sm">delete</span>
            Clear
        </button>
    </div>

    {# Main Interface #}
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-stretch">
        {# Input #}
        <div class="flex flex-col gap-4">
            <div class="bg-white/80 backdrop-blur-md border border-white rounded-[2.5rem] p-6 shadow-xl shadow-primary/5 flex-grow flex flex-col">
                <label class="text-[10px] font-bold uppercase tracking-[0.2em] text-text-muted ml-4 mb-3 block">Input JSON</label>
                <textarea x-model="inputJson" @input="process()" rows="18" placeholder="Paste your messy JSON here..." class="block w-full flex-grow px-6 py-4 bg-stone-50 border-2 border-stone-100 rounded-2xl text-text-main placeholder-stone-400 focus:outline-none focus:border-primary/30 focus:bg-white transition-all font-mono text-sm shadow-inner resize-none"></textarea>
                <div class="mt-4 ml-4 flex justify-between items-center text-[10px] font-bold text-text-muted uppercase tracking-widest">
                    <div class="flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs">format_size</span>
                        Size: <span x-text="formatBytes(inputJson.length)" class="text-primary"></span>
                    </div>
                </div>
            </div>
        </div>

        {# Output #}
        <div class="flex flex-col gap-4">
            <div class="bg-white/80 backdrop-blur-md border border-white rounded-[2.5rem] p-6 shadow-xl shadow-primary/5 flex-grow flex flex-col relative group">
                <label class="text-[10px] font-bold uppercase tracking-[0.2em] text-text-muted ml-4 mb-3 block">Formatted Output</label>
                
                {# Result Area #}
                <div class="relative flex-grow flex flex-col">
                    <pre x-text="outputJson" :class="error ? 'text-rose-600' : 'text-text-main'" class="block w-full flex-grow px-6 py-4 bg-stone-50 border-2 border-stone-100 rounded-2xl overflow-auto font-mono text-sm shadow-inner whitespace-pre-wrap min-h-[400px]"></pre>
                    
                    {# Copy Button overlay #}
                    <div x-show="outputJson && !error" class="absolute top-4 right-4 animate-fade-in" x-cloak>
                        <button @click="copyToClipboard()" class="p-3 bg-white/90 backdrop-blur shadow-lg rounded-xl text-primary hover:scale-110 transition-all active:scale-95 border border-primary/10">
                            <span class="material-symbols-outlined" x-text="copyLabel === 'Copied!' ? 'check' : 'content_copy'"></span>
                        </button>
                    </div>
                </div>

                {# Error Toast #}
                <div x-show="error" class="mt-4 p-4 bg-rose-50 text-rose-700 border border-rose-100 rounded-2xl text-xs flex items-start gap-3 animate-fade-in" x-cloak>
                    <span class="material-symbols-outlined text-lg">error</span>
                    <div class="flex flex-col gap-1">
                        <span class="font-bold uppercase tracking-wider">Invalid JSON</span>
                        <span x-text="error"></span>
                    </div>
                </div>

                <div x-show="!error && outputJson" class="mt-4 ml-4 flex justify-between items-center text-[10px] font-bold text-text-muted uppercase tracking-widest animate-fade-in" x-cloak>
                    <div class="flex items-center gap-2">
                        <span class="material-symbols-outlined text-xs">auto_fix_high</span>
                        Compressed: <span x-text="compressionRatio" class="text-emerald-600"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# Back Button #}
    <div class="flex justify-center">
        <a href="/tools/" class="flex items-center gap-2 text-text-muted hover:text-primary transition-colors font-bold uppercase tracking-widest text-xs">
            <span class="material-symbols-outlined text-sm">arrow_back</span>
            Back to Tools
        </a>
    </div>
</div>

<script>
    function jsonTool() {
        return {
            inputJson: '',
            outputJson: '',
            indent: 2,
            error: null,
            copyLabel: 'Copy',

            process() {
                if (!this.inputJson.trim()) {
                    this.outputJson = '';
                    this.error = null;
                    return;
                }

                try {
                    const parsed = JSON.parse(this.inputJson);
                    this.outputJson = JSON.stringify(parsed, null, this.indent === 0 ? null : this.indent);
                    this.error = null;
                } catch (e) {
                    this.error = e.message;
                    this.outputJson = this.inputJson; // Keep it as is if error
                }
            },

            clear() {
                this.inputJson = '';
                this.outputJson = '';
                this.error = null;
            },

            copyToClipboard() {
                navigator.clipboard.writeText(this.outputJson);
                this.copyLabel = 'Copied!';
                setTimeout(() => this.copyLabel = 'Copy', 2000);
            },

            formatBytes(bytes) {
                if (bytes === 0) return '0 B';
                const k = 1024;
                const sizes = ['B', 'KB', 'MB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
            },

            get compressionRatio() {
                if (!this.inputJson || !this.outputJson) return '0%';
                const diff = this.inputJson.length - this.outputJson.length;
                if (diff <= 0) return '0%';
                const ratio = (diff / this.inputJson.length) * 100;
                return Math.round(ratio) + '% Saved';
            }
        }
    }
</script>
