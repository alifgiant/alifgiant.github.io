---
layout: layouts/base.njk
title: Insights
permalink: /blog/
---

{# Blog Data JSON - placed outside x-data to avoid quote conflicts #}
<script id="blog-posts-data" type="application/json">
[
    {% for post in collections.posts %}
    {
        "title": {{ post.data.title | dump | safe }},
        "description": {{ post.data.description | dump | safe }},
        "url": "{{ post.url }}",
        "date": "{{ post.date | formatDate }}",
        "tags": {{ post.data.tags | dump | safe }},
        "image": "{{ post.data.image or '/assets/images/placeholder-blog.jpg' }}",
        "featured": {{ post.data.featured | default(false) }},
        "readTime": "{{ post.data.readTime or (post.content | readingTime) }}"
    }{% if not loop.last %},{% endif %}
    {% endfor %}
]
</script>

{# Wrapper with shared Alpine.js state #}
<div x-data="{ 
    search: '', 
    activeTag: 'all',
    posts: JSON.parse(document.getElementById('blog-posts-data').textContent),
    get filteredPosts() {
        return this.posts.filter(post => {
            const matchesSearch = post.title.toLowerCase().includes(this.search.toLowerCase()) || 
                                post.description.toLowerCase().includes(this.search.toLowerCase());
            const matchesTag = this.activeTag === 'all' || (post.tags && post.tags.includes(this.activeTag));
            return matchesSearch && matchesTag;
        });
    },
    get allTags() {
        const tags = new Set();
        this.posts.forEach(post => {
            if (post.tags) {
                post.tags.forEach(tag => {
                    if (tag !== 'posts') tags.add(tag);
                });
            }
        });
        return Array.from(tags).sort();
    },
    get visiblePosts() {
        const featured = this.filteredPosts.find(p => p.featured);
        const others = this.filteredPosts.filter(p => p !== featured);
        return { featured, others };
    }
}">

{# Header Section - using config values #}
<section class="size-full max-w-[1400px] flex flex-col md:flex-row justify-between items-end gap-8 mb-12 md:mb-16">
    <div class="flex flex-col gap-6 w-full">
        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/5 border border-primary/10 w-fit">
            <span class="size-2 rounded-full bg-primary animate-pulse"></span>
            <span class="text-xs font-bold uppercase tracking-widest text-primary">Journal &amp; Notes</span>
        </div>
        <h1 class="text-6xl md:text-7xl lg:text-8xl font-display font-bold text-text-main leading-[0.9] tracking-tight">
            {{ site.pages.blog.title }}<br/><span class="text-stone-300">Unfiltered.</span>
        </h1>
        <p class="text-lg text-text-muted leading-relaxed">
            {{ site.pages.blog.subtitle }}
        </p>

        {# Search and Filters #}
        <div class="flex flex-col gap-6 mt-8 w-full">
            <div class="flex items-center gap-4 w-full">
                <div class="relative group flex-1">
                    <span class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-stone-400 group-focus-within:text-primary transition-colors">search</span>
                    <input type="text" 
                           x-model="search"
                           placeholder="Search articles..." 
                           class="w-full pl-12 pr-4 py-4 rounded-2xl bg-white border border-stone-200 focus:border-primary focus:ring-4 focus:ring-primary/5 outline-none transition-all text-text-main shadow-sm" />
                </div>

                <div class="flex items-center gap-3 whitespace-nowrap">
                    <div class="text-sm text-stone-400">Total</div>
                    <div class="px-3 py-2 bg-white border border-stone-200 rounded-full text-text-main font-bold">
                        <span x-text="posts.length"></span>
                        <span class="text-stone-400 ml-2 text-xs">posts</span>
                    </div>
                </div>
            </div>
            
            <div class="flex flex-wrap gap-2">
                <button @click="activeTag = 'all'"
                        :class="activeTag === 'all' ? 'bg-text-main text-white' : 'bg-white border border-stone-200 text-text-muted hover:border-primary hover:text-primary'"
                        class="px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wider transition-all">All</button>
                <template x-for="tag in allTags" :key="tag">
                    <button @click="activeTag = tag"
                            :class="activeTag === tag ? 'bg-text-main text-white' : 'bg-white border border-stone-200 text-text-muted hover:border-primary hover:text-primary'"
                            class="px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wider transition-all"
                            x-text="tag"></button>
                </template>
            </div>
        </div>
    </div>
    
</section>

{# Blog Posts #}
<div class="size-full max-w-[1400px]">
    {# Featured Post #}
    <template x-if="visiblePosts.featured">
        <a class="group relative w-full bg-white rounded-[2.5rem] p-6 md:p-10 shadow-xl shadow-stone-200/50 hover:shadow-2xl hover:shadow-primary/10 transition-all duration-500 border border-white hover:border-primary/20 overflow-hidden mb-12 block"
           :href="visiblePosts.featured.url">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-center">
                <div class="h-64 md:h-[400px] lg:h-[500px] w-full rounded-3xl overflow-hidden relative">
                    <img :alt="visiblePosts.featured.title"
                         class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
                         :src="visiblePosts.featured.image" />
                    <div class="absolute inset-0 bg-gradient-to-t from-stone-900/40 to-transparent"></div>
                    <div class="absolute bottom-6 left-6 px-4 py-2 rounded-full bg-white/20 backdrop-blur-md border border-white/30 text-white text-xs font-bold uppercase tracking-wider">
                        Featured
                    </div>
                </div>
                <div class="flex flex-col gap-6 lg:pr-10">
                    <div class="flex items-center gap-3 text-xs font-bold uppercase tracking-wider text-primary">
                        <span x-text="visiblePosts.featured.date"></span>
                    </div>
                    <h2 class="text-4xl md:text-5xl font-display font-bold text-text-main leading-tight group-hover:text-primary transition-colors"
                        x-text="visiblePosts.featured.title"></h2>
                    <p class="text-lg text-text-muted leading-relaxed line-clamp-3"
                       x-text="visiblePosts.featured.description"></p>
                    <div class="flex items-center gap-2 mt-2">
                        <span class="text-sm font-bold text-text-main border-b-2 border-primary/30 group-hover:border-primary transition-all">{{ site.pages.blog.read_more }}</span>
                        <span class="material-symbols-outlined text-lg text-primary group-hover:translate-x-1 transition-transform">arrow_forward</span>
                    </div>
                </div>
            </div>
        </a>
    </template>
    
    {# Post Grid #}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10">
        <template x-for="post in visiblePosts.others" :key="post.url">
            <a class="group flex flex-col bg-white rounded-[2rem] overflow-hidden shadow-lg shadow-stone-200/40 hover:shadow-xl hover:shadow-primary/10 hover:-translate-y-1 transition-all duration-300 border border-stone-100 h-full"
               :href="post.url">
                <div class="aspect-video w-full overflow-hidden relative">
                    <img :src="post.image" :alt="post.title" loading="lazy" decoding="async" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
                    <div class="absolute inset-0 bg-primary/5 group-hover:bg-transparent transition-colors"></div>
                </div>
                <div class="p-8 flex flex-col flex-grow">
                    <div class="flex items-center justify-between mb-6">
                        <span class="text-xs font-bold text-stone-400" x-text="post.date"></span>
                        <span class="material-symbols-outlined text-stone-300 group-hover:text-primary transition-colors">north_east</span>
                    </div>
                    <h3 class="text-2xl font-display font-bold text-text-main mb-4 group-hover:text-primary transition-colors"
                        x-text="post.title"></h3>
                    <p class="text-text-muted mb-6 flex-grow leading-relaxed line-clamp-3"
                       x-text="post.description"></p>
                    <div class="flex items-center gap-4 text-sm text-stone-400 font-medium">
                        <div class="flex items-center gap-1">
                            <span class="material-symbols-outlined text-[16px]">schedule</span>
                            <span x-text="post.readTime"></span>
                        </div>
                        <div class="flex flex-wrap gap-2 items-center" x-show="post.tags && post.tags.length">
                            <template x-for="tag in post.tags.filter(t => t !== 'posts')" :key="tag">
                                <span class="px-2 py-0.5 rounded-full bg-white border border-stone-200 text-xs font-bold text-stone-600" x-text="tag"></span>
                            </template>
                        </div>
                    </div>
                </div>
            </a>
        </template>
    </div>

    {# No results #}
    <template x-if="visiblePosts.featured === undefined && visiblePosts.others.length === 0">
        <div class="w-full py-24 flex flex-col items-center justify-center text-center gap-4 bg-stone-50 rounded-[3rem] border-2 border-dashed border-stone-200">
            <span class="material-symbols-outlined text-6xl text-stone-300">search_off</span>
            <div class="flex flex-col">
                <h3 class="text-2xl font-display font-bold text-text-main">No articles found</h3>
                <p class="text-text-muted">Try adjusting your search or filter to find what you're looking for.</p>
            </div>
            <button @click="search = ''; activeTag = 'all'" 
                    class="mt-4 px-6 py-2 bg-text-main text-white rounded-full font-bold text-sm hover:bg-primary transition-colors">Clear all filters</button>
        </div>
    </template>
</div>

</div> {# Close wrapper x-data #}
