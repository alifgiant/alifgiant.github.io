---
layout: layouts/base.njk
title: Regex Checker
permalink: /tools/regex/
---

<div class="w-full max-w-6xl flex flex-col gap-12" x-data="regexTool()">
    {# Header #}
    <div class="flex flex-col gap-4 text-center items-center">
        <div class="p-4 rounded-full bg-primary/10 text-primary mb-2">
            <span class="material-symbols-outlined text-4xl">regular_expression</span>
        </div>
        <h1 class="text-4xl md:text-6xl font-bold text-text-main font-display">
            Regex Checker
        </h1>
        <p class="text-lg text-text-muted max-w-xl leading-relaxed">
            Test and refine your regular expressions with real-time feedback and matching.
        </p>
    </div>

    {# Tool Card #}
    <div class="bg-white/80 backdrop-blur-md border border-white rounded-[2.5rem] p-8 md:p-12 shadow-2xl shadow-primary/10 transition-all duration-500">
        <div class="flex flex-col gap-8">
            
            {# Regex Input #}
            <div class="flex flex-col gap-4">
                <label class="text-xs font-bold uppercase tracking-widest text-text-muted ml-1">Regular Expression</label>
                <div class="relative flex items-center">
                    <span class="absolute left-6 text-stone-400 font-mono text-xl select-none">/</span>
                    <input type="text" x-model="regexPattern" @input="testRegex()" placeholder="([a-z0-9._%+-]+)@([a-z0-9.-]+\.[a-z]{2,})" class="block w-full pl-10 pr-24 py-5 bg-stone-50 border-2 border-stone-100 rounded-2xl text-text-main placeholder-stone-400 focus:outline-none focus:border-primary/30 focus:bg-white transition-all text-lg shadow-inner font-mono">
                    <span class="absolute right-6 text-stone-400 font-mono text-xl select-none">/ <span class="text-primary font-bold" x-text="flags"></span></span>
                </div>
                
                {# Flags #}
                <div class="flex flex-wrap gap-3 ml-1">
                    <template x-for="flag in availableFlags">
                        <button @click="toggleFlag(flag.char)" :class="flags.includes(flag.char) ? 'bg-primary text-white border-primary shadow-md' : 'bg-stone-50 text-text-muted border-stone-100'" class="px-3 py-1.5 rounded-xl border text-[10px] font-bold uppercase tracking-wider transition-all duration-300 flex items-center gap-2">
                            <span x-text="flag.char"></span>
                            <span class="opacity-60 text-[8px]" x-text="flag.name"></span>
                        </button>
                    </template>
                </div>
            </div>

            {# Test String #}
            <div class="flex flex-col gap-4">
                <label class="text-xs font-bold uppercase tracking-widest text-text-muted ml-1">Test String</label>
                <div class="relative min-h-[200px] flex">
                    {# Hidden highlighting layer #}
                    <div class="absolute inset-0 px-6 py-4 font-mono text-sm leading-relaxed whitespace-pre-wrap pointer-events-none break-all" x-html="highlightedText"></div>
                    
                    {# Editable layer #}
                    <textarea x-model="testString" @input="testRegex()" placeholder="Type your test string here..." class="block w-full px-6 py-4 bg-transparent border-2 border-stone-100 rounded-2xl text-transparent caret-text-main placeholder-stone-400 focus:outline-none focus:border-primary/30 transition-all font-mono text-sm shadow-inner resize-none min-h-[200px] z-10 break-all"></textarea>
                </div>
            </div>

            {# Results #}
            <div x-show="regexPattern && (error || matches.length >= 0)" class="flex flex-col gap-4 animate-fade-in" x-cloak>
                {# Error #}
                <template x-if="error">
                    <div class="p-4 bg-rose-50 text-rose-700 border border-rose-100 rounded-2xl text-xs flex items-center gap-3">
                        <span class="material-symbols-outlined text-lg">error</span>
                        <span x-text="error"></span>
                    </div>
                </template>

                {# Matches #}
                <template x-if="!error">
                    <div class="flex flex-col gap-4">
                        <div class="flex justify-between items-center ml-1">
                            <h3 class="text-sm font-bold uppercase tracking-widest text-text-muted">
                                Matches (<span x-text="matches.length"></span>)
                            </h3>
                        </div>
                        
                        <div x-show="matches.length > 0" class="grid grid-cols-1 md:grid-cols-2 gap-3 max-h-60 overflow-y-auto pr-2 custom-scrollbar">
                            <template x-for="(match, index) in matches">
                                <div class="p-4 bg-stone-50 border border-stone-100 rounded-xl flex flex-col gap-1">
                                    <div class="flex justify-between items-center">
                                        <span class="text-[10px] font-bold text-primary uppercase">Match #<span x-text="index + 1"></span></span>
                                        <span class="text-[10px] text-text-muted font-mono" x-text="'Index: ' + match.index"></span>
                                    </div>
                                    <span class="font-mono text-sm break-all text-text-main" x-text="match.value"></span>
                                </div>
                            </template>
                        </div>
                        
                        <div x-show="matches.length === 0" class="p-8 border-2 border-dashed border-stone-100 rounded-2xl text-center">
                            <span class="text-text-muted italic text-sm">No matches found.</span>
                        </div>
                    </div>
                </template>
            </div>
        </div>
    </div>

    {# Helpful Tips #}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="bg-primary/5 rounded-3xl p-6 border border-primary/10 flex gap-4">
            <span class="material-symbols-outlined text-primary">keyboard_command_key</span>
            <div>
                <h4 class="font-bold text-sm text-text-main mb-1">Common Patterns</h4>
                <ul class="text-xs text-text-muted space-y-2">
                    <li><code>\d+</code> - Matches digits</li>
                    <li><code>[a-zA-Z]+</code> - Matches only letters</li>
                    <li><code>^...$</code> - Anchors to start and end</li>
                </ul>
            </div>
        </div>
        <div class="bg-primary/5 rounded-3xl p-6 border border-primary/10 flex gap-4">
            <span class="material-symbols-outlined text-primary">visibility</span>
            <div>
                <h4 class="font-bold text-sm text-text-main mb-1">Live Highlighting</h4>
                <p class="text-xs text-text-muted leading-relaxed">
                    Visual matches are shown directly in the test field. Captured groups are prioritized in matches list.
                </p>
            </div>
        </div>
    </div>

    {# Back Button #}
    <div class="flex justify-center">
        <a href="/tools/" class="flex items-center gap-2 text-text-muted hover:text-primary transition-colors font-bold uppercase tracking-widest text-xs">
            <span class="material-symbols-outlined text-sm">arrow_back</span>
            Back to Tools
        </a>
    </div>
</div>

<style>
    .highlight-match {
        background-color: rgba(141, 110, 99, 0.2);
        border-bottom: 2px solid #8D6E63;
        border-radius: 2px;
    }
    .custom-scrollbar::-webkit-scrollbar {
        width: 4px;
    }
    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #e7e5e4;
        border-radius: 4px;
    }
</style>

<script>
    function regexTool() {
        return {
            regexPattern: '',
            testString: '',
            flags: 'g',
            matches: [],
            error: null,
            availableFlags: [
                { char: 'g', name: 'Global' },
                { char: 'i', name: 'Case Insensitive' },
                { char: 'm', name: 'Multiline' },
                { char: 's', name: 'Dot All' },
                { char: 'u', name: 'Unicode' }
            ],

            toggleFlag(char) {
                if (this.flags.includes(char)) {
                    this.flags = this.flags.replace(char, '');
                } else {
                    this.flags += char;
                }
                this.testRegex();
            },

            testRegex() {
                this.error = null;
                this.matches = [];

                if (!this.regexPattern) return;

                try {
                    const re = new RegExp(this.regexPattern, this.flags);
                    
                    if (this.testString) {
                        let match;
                        if (this.flags.includes('g')) {
                            while ((match = re.exec(this.testString)) !== null) {
                                this.matches.push({
                                    value: match[0],
                                    index: match.index
                                });
                                if (match.index === re.lastIndex) re.lastIndex++; // Avoid infinite loops
                            }
                        } else {
                            match = re.exec(this.testString);
                            if (match) {
                                this.matches.push({
                                    value: match[0],
                                    index: match.index
                                });
                            }
                        }
                    }
                } catch (e) {
                    this.error = e.message;
                }
            },

            get highlightedText() {
                if (!this.testString || !this.regexPattern || this.error) return this.testString;

                try {
                    const re = new RegExp(this.regexPattern, this.flags);
                    
                    // Simple replacement with HTML won't work perfectly due to escaping, 
                    // but for a dev tool highlight it's a good start.
                    // To do it correctly, we need to handle HTML escaping.
                    const escaped = this.testString
                        .replace(/&/g, "&amp;")
                        .replace(/</g, "&lt;")
                        .replace(/>/g, "&gt;");

                    return escaped.replace(re, (match) => {
                        return `<span class="highlight-match">${match}</span>`;
                    });
                } catch (e) {
                    return this.testString;
                }
            }
        }
    }
</script>
